// ConsoleApplication3.cpp : 定义控制台应用程序的入口点。
//

#include<iostream>
#include<string>
using namespace std;
class Word {
public:
	Word();
	void set_information();//建立单词信息
	string get_name();
	string get_meaning(int);
	int get_num();
	void print();
private:
	string kind;//单词种类
	string name;//单词本身
	string feature;//单词词性
	string meaning[10];//单词含义
	int num;//单词含义数量
};
class Dictionary {
public:
	Dictionary();
	void add(int i);//添加单词
	void print();
	int get_number();//字典的单词数量
	Word words[10];
private:
	int number;
};
class Test {
public:
	Test();
private:
	int score;
};
Word::Word() {}
void Word::set_information()
{
	cout << "单词种类:";
	cin >> kind;
	cout << "单词名称:";
	cin >> name;
	cout << "单词词性:";
	cin >> feature;
	cout << "请输入该单词的含义数量：";
	cin >> num;
	for (int i = 0; i<num; i++)
	{
		cout << "含义:";
		cin >> meaning[i];
	}
}
string Word::get_name()
{
	return name;
}
string Word::get_meaning(int j)
{
	return meaning[j];
}
int Word::get_num()
{
	return num;
}
void Word::print()
{
	cout << kind << endl << name << endl << feature << endl;
	for (int i = 0; i<num; i++)
		cout << meaning[i] << endl;
}
Dictionary::Dictionary() { number = 0; }
void Dictionary::add(int i)//往字典里添加单词
{
	words[i].set_information();
	number++;
}
void Dictionary::print()
{
	for (int i = 0; i<get_number(); i++)
		words[i].print();
}
int Dictionary::get_number()
{
	return number;
}
Test::Test() {}

void menu()
{
	cout << "\n==================== Menu =============================\n"
		<< " a--add  y--yinghan  h--hanying  v--view  t--text  e--exit \n"
		<< " 请选择:";
}

int main()
{
	Dictionary dictionary;
	string word;
	while (1)
	{
		menu();
		char c;
		cin >> c;
		if (c == 'a')
		{
			cout << " 请输入单词：";
			char ch;
			for (int i = 0;; i++)
			{
				dictionary.add(i);
				cout << "是否继续输入？Y/N" << endl;
				cin >> ch;
				if (ch == 'N')
					break;
			}
			cout << " 插入成功!" << endl;
		}
		if (c == 'y')
		{
			cout << "请输入要查询的单词：";
			cin >> word;
			for (int i = 0; i<dictionary.get_number(); i++)
			{
				if (word == dictionary.words[i].get_name())
				{
					cout << "以下为您查询的单词信息" << endl;
					dictionary.words[i].print();
				}
			}
		}
		if (c == 'h')
		{
			cout << "请输入汉语意思：";
			string chinese;
			cin >> chinese;
			for (int i = 0; i<dictionary.get_number(); i++)
			{
				for (int j = 0; j<dictionary.words[i].get_num(); j++)
				{
					if (chinese == dictionary.words[i].get_meaning(j))
					{
						cout << "以下为您查询的单词信息" << endl;
						dictionary.words[i].print();
					}
				}
			}
		}
		if (c == 'v')
		{
			dictionary.print();
		}
		if (c == 't')
		{
			string answer[10];
			string test[10];
			int score = 0;
			cout << "进行测试";
			cout << "请选择什么模式：y--yinghan  h--hanying ";
			char p;
			cin >> p;
			if (p == 'y')
			{
				int k;
				int j = 0;

				for (int i = 0; i<dictionary.get_number(); i++)
				{
					k = 0;
					cout << dictionary.words[i].get_name() << " ";;
					while (j >= 0)
					{
						answer[j] = dictionary.words[i].get_meaning(k);
						j++;
						if (k != dictionary.words[i].get_num() - 1)
							k++;
						else
							break;
					}
				}
				cout << "请输入答案：" << endl;
				for (int i = 0; i<dictionary.get_number(); i++)
				{
					cin >> test[i];
					for (int j = 0; j<10; j++)
						if (test[i] == answer[j])
							score += 20;
				}
				cout << "您的得分为：" << score;
			}
			if (p == 'h')
			{
				score = 0;
				for (int i = 0; i<dictionary.get_number(); i++)
				{
					cout << dictionary.words[i].get_meaning(0);
					answer[i] = dictionary.words[i].get_name();
				}
				cout << "请输入答案：" << endl;
				for (int i = 0; i<dictionary.get_number(); i++)
				{
					cin >> test[i];
					if (test[i] == answer[i])
						score += 10;
				}
				cout << "您的得分为：" << score;
			}
		}
		if (c == 'e')
			break;
	}
	return 0;
}


